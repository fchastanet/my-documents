<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bash on My Documents</title><link>https://fchastanet.github.io/my-documents/tags/bash/</link><description>Recent content in Bash on My Documents</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://fchastanet.github.io/my-documents/tags/bash/index.xml" rel="self" type="application/rss+xml"/><item><title>Basic Best Practices</title><link>https://fchastanet.github.io/my-documents/docs/bash-scripts/basic-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/bash-scripts/basic-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-external-references"&gt;1. External references&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-general-best-practices"&gt;2. General best practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-escape-quotes"&gt;3. escape quotes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-bash-environment-options"&gt;4. Bash environment options&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#41-errexit-set--e--set--o-errexit"&gt;4.1. errexit (set -e | set -o errexit)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#411-caveats-with-command-substitution"&gt;4.1.1. Caveats with command substitution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#412-caveats-with-process-substitution"&gt;4.1.2. Caveats with process substitution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#413-process-substitution-is-asynchronous"&gt;4.1.3. Process substitution is asynchronous&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#42-pipefail-set--o-pipefail"&gt;4.2. pipefail (set -o pipefail)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#43-errtrace-set--e--set--o-errtrace"&gt;4.3. errtrace (set -E | set -o errtrace)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#44-nounset-set--u--set--o-nounset"&gt;4.4. nounset (set -u | set -o nounset)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#45-inherit-error-exit-code-in-sub-shells"&gt;4.5. inherit error exit code in sub shells&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#46-posix-set--o-posix"&gt;4.6. posix (set -o posix)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-main-function"&gt;5. Main function&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-arguments"&gt;6. Arguments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#7-some-commands-default-options-to-use"&gt;7. some commands default options to use&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#8-variables"&gt;8. Variables&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#81-variable-declaration"&gt;8.1. Variable declaration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#82-variable-naming-convention"&gt;8.2. variable naming convention&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#83-variable-expansion"&gt;8.3. Variable expansion&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#831-examples"&gt;8.3.1. Examples&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#84-check-if-a-variable-is-defined"&gt;8.4. Check if a variable is defined&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#85-variable-default-value"&gt;8.5. Variable default value&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#86-passing-variable-by-reference-to-function"&gt;8.6. Passing variable by reference to function&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#861-example-1"&gt;8.6.1. Example 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#862-example-2"&gt;8.6.2. Example 2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#9-capture-output"&gt;9. Capture output&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#91-capture-output-and-test-result"&gt;9.1. Capture output and test result&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#92-capture-output-and-retrieve-status-code"&gt;9.2. Capture output and retrieve status code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10-array"&gt;10. Array&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#11-temporary-directory"&gt;11. Temporary directory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#12-traps"&gt;12. Traps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#13-deal-with-sigpipe---exit-code-141"&gt;13. Deal with SIGPIPE - exit code 141&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#14-performances-analysis"&gt;14. Performances analysis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#15-bash-performance-tips"&gt;15. Bash Performance tips&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#151-arraywrap2-performance-improvement"&gt;15.1. Array::wrap2 performance improvement&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-external-references"&gt;1. External references&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dylanaraps/pure-bash-bible?tab=readme-ov-file"&gt;pure bash bible&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/dylanaraps/pure-sh-bible?tab=readme-ov-file"&gt;pure sh(posix) bible&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-general-best-practices"&gt;2. General best practices&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;cat &amp;lt;&amp;lt; 'EOF'&lt;/code&gt; avoid to interpolate variables&lt;/p&gt;</description></item><item><title>Linux Commands Best Practices</title><link>https://fchastanet.github.io/my-documents/docs/bash-scripts/linux-commands-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/bash-scripts/linux-commands-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-some-commands-default-options-to-use"&gt;1. some commands default options to use&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-bash-and-grep-regular-expressions"&gt;2. Bash and grep regular expressions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-some-commands-default-options-to-use"&gt;1. some commands default options to use&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://dougrichardson.us/notes/fail-fast-bash-scripting.html"&gt;https://dougrichardson.us/notes/fail-fast-bash-scripting.html&lt;/a&gt; but set -o nounset is not usable because empty array
are considered unset&lt;/li&gt;
&lt;li&gt;always use &lt;code&gt;sed -E&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;avoid using grep -P as it is not supported on alpine, prefer using -E&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- markdownlint-capture --&gt;
&lt;!-- markdownlint-disable MD033 --&gt;
&lt;h2 id="2-bash-and-grep-regular-expressions"&gt;2. &lt;a name="regularExpressions"&gt;&lt;/a&gt;Bash and grep regular expressions&lt;/h2&gt;
&lt;!-- markdownlint-restore --&gt;
&lt;ul&gt;
&lt;li&gt;grep regular expression &lt;code&gt;[A-Za-z]&lt;/code&gt; matches by default accentuated character, if you don&amp;rsquo;t want to match them, use the
environment variable &lt;code&gt;LC_ALL=POSIX&lt;/code&gt;,
&lt;ul&gt;
&lt;li&gt;Eg: &lt;code&gt;LC_ALL=POSIX grep -E -q '^[A-Za-z_0-9:]+$'&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;I added &lt;code&gt;export LC_ALL=POSIX&lt;/code&gt; in all my headers, it can be overridden using a subShell&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Bats Testing Framework</title><link>https://fchastanet.github.io/my-documents/docs/bash-scripts/bats-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/bash-scripts/bats-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-use-of-default-temp-directory-created-by-bats"&gt;1. use of default temp directory created by bats&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-avoid-boilerplate-code"&gt;2. avoid boilerplate code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-override-an-environment-variable-when-using-bats-run"&gt;3. Override an environment variable when using bats run&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-override-a-bash-framework-function"&gt;4. Override a bash framework function&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-use-of-default-temp-directory-created-by-bats"&gt;1. use of default temp directory created by bats&lt;/h2&gt;
&lt;p&gt;Instead of creating yourself your temp directory, you can use the special variable &lt;code&gt;BATS_TEST_TMPDIR&lt;/code&gt;, this directory is
automatically destroyed at the end of the test except if the option &lt;code&gt;--no-tempdir-cleanup&lt;/code&gt; is provided to bats command.&lt;/p&gt;</description></item></channel></rss>