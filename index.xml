<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>My Documents</title><link>https://fchastanet.github.io/my-documents/</link><description>Recent content on My Documents</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://fchastanet.github.io/my-documents/index.xml" rel="self" type="application/rss+xml"/><item><title>Basic Best Practices</title><link>https://fchastanet.github.io/my-documents/docs/bash-scripts/basic-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/bash-scripts/basic-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-external-references"&gt;1. External references&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-general-best-practices"&gt;2. General best practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-escape-quotes"&gt;3. escape quotes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-bash-environment-options"&gt;4. Bash environment options&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#41-errexit-set--e--set--o-errexit"&gt;4.1. errexit (set -e | set -o errexit)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#411-caveats-with-command-substitution"&gt;4.1.1. Caveats with command substitution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#412-caveats-with-process-substitution"&gt;4.1.2. Caveats with process substitution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#413-process-substitution-is-asynchronous"&gt;4.1.3. Process substitution is asynchronous&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#42-pipefail-set--o-pipefail"&gt;4.2. pipefail (set -o pipefail)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#43-errtrace-set--e--set--o-errtrace"&gt;4.3. errtrace (set -E | set -o errtrace)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#44-nounset-set--u--set--o-nounset"&gt;4.4. nounset (set -u | set -o nounset)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#45-inherit-error-exit-code-in-sub-shells"&gt;4.5. inherit error exit code in sub shells&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#46-posix-set--o-posix"&gt;4.6. posix (set -o posix)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-main-function"&gt;5. Main function&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-arguments"&gt;6. Arguments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#7-some-commands-default-options-to-use"&gt;7. some commands default options to use&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#8-variables"&gt;8. Variables&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#81-variable-declaration"&gt;8.1. Variable declaration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#82-variable-naming-convention"&gt;8.2. variable naming convention&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#83-variable-expansion"&gt;8.3. Variable expansion&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#831-examples"&gt;8.3.1. Examples&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#84-check-if-a-variable-is-defined"&gt;8.4. Check if a variable is defined&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#85-variable-default-value"&gt;8.5. Variable default value&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#86-passing-variable-by-reference-to-function"&gt;8.6. Passing variable by reference to function&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#861-example-1"&gt;8.6.1. Example 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#862-example-2"&gt;8.6.2. Example 2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#9-capture-output"&gt;9. Capture output&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#91-capture-output-and-test-result"&gt;9.1. Capture output and test result&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#92-capture-output-and-retrieve-status-code"&gt;9.2. Capture output and retrieve status code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10-array"&gt;10. Array&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#11-temporary-directory"&gt;11. Temporary directory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#12-traps"&gt;12. Traps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#13-deal-with-sigpipe---exit-code-141"&gt;13. Deal with SIGPIPE - exit code 141&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#14-performances-analysis"&gt;14. Performances analysis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#15-bash-performance-tips"&gt;15. Bash Performance tips&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#151-arraywrap2-performance-improvement"&gt;15.1. Array::wrap2 performance improvement&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-external-references"&gt;1. External references&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dylanaraps/pure-bash-bible?tab=readme-ov-file"&gt;pure bash bible&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/dylanaraps/pure-sh-bible?tab=readme-ov-file"&gt;pure sh(posix) bible&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-general-best-practices"&gt;2. General best practices&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;cat &amp;lt;&amp;lt; 'EOF'&lt;/code&gt; avoid to interpolate variables&lt;/p&gt;</description></item><item><title>How Jenkins Works</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/01-how-jenkins-works/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/01-how-jenkins-works/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-jenkins-master-slave-architecture"&gt;1. Jenkins Master Slave Architecture&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#11-jenkins-controllerjenkins-master-node"&gt;1.1. Jenkins controller/Jenkins master node&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#12-nodes"&gt;1.2. Nodes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#13-agents"&gt;1.3. Agents&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#14-executors"&gt;1.4. Executors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#15-jobs"&gt;1.5. Jobs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-jenkins-dynamic-node"&gt;2. Jenkins dynamic node&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Source: &lt;a href="https://www.jenkins.io/doc/book/managing/nodes/"&gt;https://www.jenkins.io/doc/book/managing/nodes/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Source glossary: &lt;a href="https://www.jenkins.io/doc/book/glossary/"&gt;https://www.jenkins.io/doc/book/glossary/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="1-jenkins-master-slave-architecture"&gt;1. Jenkins Master Slave Architecture&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://i0.wp.com/digitalvarys.com/wp-content/uploads/2019/05/image-4.png?resize=920%2C581" alt="Jenkins Master Slave Architecture"&gt;&lt;/p&gt;
&lt;p&gt;The Jenkins &lt;strong&gt;controller&lt;/strong&gt; is the &lt;strong&gt;master node&lt;/strong&gt; which is able to launch &lt;strong&gt;jobs&lt;/strong&gt; on different &lt;strong&gt;nodes&lt;/strong&gt; (machines)
directed by an &lt;strong&gt;Agent&lt;/strong&gt;. The Agent can the use one or several &lt;strong&gt;executors&lt;/strong&gt; to execute the job(s) depending on
configuration.&lt;/p&gt;</description></item><item><title>Test</title><link>https://fchastanet.github.io/my-documents/docs/lists/test/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/lists/test/</guid><description>&lt;h2 id="1-test-tools"&gt;1. Test tools&lt;/h2&gt;
&lt;h3 id="11-testcontainers"&gt;1.1. TestContainers&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://testcontainers.com/"&gt;TestContainers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Unit tests with real dependencies&lt;/p&gt;
&lt;p&gt;TestContainers is an open source framework for providing throwaway, lightweight instances of
databases, message brokers, web browsers, or just about anything that can run in a Docker
container.&lt;/p&gt;
&lt;p&gt;Test dependencies as code&lt;/p&gt;
&lt;p&gt;No more need for mocks or complicated environment configurations. Define your test
dependencies as code, then simply run your tests and containers will be created and then
deleted.&lt;/p&gt;</description></item><item><title>How to Write Dockerfiles</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-dockerfile/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-dockerfile/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-dockerfile-best-practices"&gt;1. Dockerfile best practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-basic-best-practices"&gt;2. Basic best practices&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#21-best-practice-1-merge-the-image-layers"&gt;2.1. Best Practice #1: Merge the image layers&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#211-bad-practice-1"&gt;2.1.1. Bad practice #1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#212-best-practice-1"&gt;2.1.2. Best practice #1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#22-best-practice-2-trace-commands-and-fail-on-error"&gt;2.2. Best Practice #2: trace commands and fail on error&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#221-bad-practice-2"&gt;2.2.1. Bad practice #2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#222-best-practice-2"&gt;2.2.2. Best Practice #2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#23-best-practice-3-packages-ordering-and-versions"&gt;2.3. Best practice #3: packages ordering and versions&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#231-bad-practice-3"&gt;2.3.1. Bad practice #3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#232-best-practice-3"&gt;2.3.2. Best Practice #3&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#2321-order-packages-alphabetically-and-one-package-by-line"&gt;2.3.2.1. Order packages alphabetically and one package by line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2322-always-specify-packages-versions"&gt;2.3.2.2. Always specify packages versions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2323-ensure-non-interactive"&gt;2.3.2.3. Ensure non interactive&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#24-best-practice-4-ensure-image-receives-latest-security-updates"&gt;2.4. Best practice #4: ensure image receives latest security updates&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#241-bad-practice-4"&gt;2.4.1. Bad practice #4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#242-best-practice-4"&gt;2.4.2. Best Practice #4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#25-conclusion-image-size-comparison"&gt;2.5. Conclusion: image size comparison&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#251-dockerfile-without-best-practices"&gt;2.5.1. Dockerfile without best practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#252-dockerfile-with-all-optimizations"&gt;2.5.2. Dockerfile with all optimizations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-docker-buildx-best-practices"&gt;3. Docker Buildx best practices&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#31-optimize-image-size"&gt;3.1. Optimize image size&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#311-dockerfile-not-optimized"&gt;3.1.1. Dockerfile not optimized&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#312-dockerfile-optimized"&gt;3.1.2. Dockerfile optimized&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-dockerfile-best-practices"&gt;1. Dockerfile best practices&lt;/h2&gt;
&lt;p&gt;Follow &lt;a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/"&gt;official best practices&lt;/a&gt; and you can
follow these specific best practices&lt;/p&gt;</description></item><item><title>Jenkins Pipelines</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/02-jenkins-pipelines/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/02-jenkins-pipelines/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-what-is-a-pipeline-"&gt;1. What is a pipeline ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-pipeline-creation-via-ui"&gt;2. Pipeline creation via UI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-groovy"&gt;3. Groovy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-difference-between-scripted-pipeline-freestyle-and-declarative-pipeline-syntax"&gt;4. Difference between scripted pipeline (freestyle) and declarative pipeline syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-declarative-pipeline-example"&gt;5. Declarative pipeline example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-scripted-pipeline-example"&gt;6. Scripted pipeline example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#7-why-pipeline"&gt;7. Why Pipeline?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-what-is-a-pipeline-"&gt;1. What is a pipeline ?&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.jenkins.io/doc/book/pipeline/"&gt;https://www.jenkins.io/doc/book/pipeline/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Jenkins Pipeline (or simply &amp;ldquo;Pipeline&amp;rdquo; with a capital &amp;ldquo;P&amp;rdquo;) is a suite of plugins which supports implementing and
integrating &lt;em&gt;continuous delivery pipelines&lt;/em&gt; into Jenkins.&lt;/p&gt;
&lt;p&gt;A &lt;em&gt;continuous delivery (CD) pipeline&lt;/em&gt; is an automated expression of your process for getting software from version
control right through to your users and customers. Every change to your software (committed in source control) goes
through a complex process on its way to being released. This process involves building the software in a reliable and
repeatable manner, as well as progressing the built software (called a &amp;ldquo;build&amp;rdquo;) through multiple stages of testing and
deployment.&lt;/p&gt;</description></item><item><title>Linux Commands Best Practices</title><link>https://fchastanet.github.io/my-documents/docs/bash-scripts/linux-commands-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/bash-scripts/linux-commands-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-some-commands-default-options-to-use"&gt;1. some commands default options to use&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-bash-and-grep-regular-expressions"&gt;2. Bash and grep regular expressions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-some-commands-default-options-to-use"&gt;1. some commands default options to use&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://dougrichardson.us/notes/fail-fast-bash-scripting.html"&gt;https://dougrichardson.us/notes/fail-fast-bash-scripting.html&lt;/a&gt; but set -o nounset is not usable because empty array
are considered unset&lt;/li&gt;
&lt;li&gt;always use &lt;code&gt;sed -E&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;avoid using grep -P as it is not supported on alpine, prefer using -E&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- markdownlint-capture --&gt;
&lt;!-- markdownlint-disable MD033 --&gt;
&lt;h2 id="2-bash-and-grep-regular-expressions"&gt;2. &lt;a name="regularExpressions"&gt;&lt;/a&gt;Bash and grep regular expressions&lt;/h2&gt;
&lt;!-- markdownlint-restore --&gt;
&lt;ul&gt;
&lt;li&gt;grep regular expression &lt;code&gt;[A-Za-z]&lt;/code&gt; matches by default accentuated character, if you don&amp;rsquo;t want to match them, use the
environment variable &lt;code&gt;LC_ALL=POSIX&lt;/code&gt;,
&lt;ul&gt;
&lt;li&gt;Eg: &lt;code&gt;LC_ALL=POSIX grep -E -q '^[A-Za-z_0-9:]+$'&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;I added &lt;code&gt;export LC_ALL=POSIX&lt;/code&gt; in all my headers, it can be overridden using a subShell&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Web Tools</title><link>https://fchastanet.github.io/my-documents/docs/lists/web/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/lists/web/</guid><description>&lt;h2 id="1-osint-tools"&gt;1. OSINT tools&lt;/h2&gt;
&lt;p&gt;What Are Open Source Intelligence (OSINT) Tools? Open-source intelligence software, abbreviated
as OSINT software, are tools that allow the collection of information that is publicly available
or open-source. The goal of using OSINT software is mainly to learn more about an individual or a
business.&lt;/p&gt;
&lt;h3 id="11-lissy93web-check"&gt;1.1. Lissy93/web-check&lt;/h3&gt;
&lt;p&gt;All-in-one OSINT tool for analyzing any website Comprehensive, on-demand open source intelligence
for any website&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/Lissy93/web-check"&gt;github project Lissy93/web-check&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Bats Testing Framework</title><link>https://fchastanet.github.io/my-documents/docs/bash-scripts/bats-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/bash-scripts/bats-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-use-of-default-temp-directory-created-by-bats"&gt;1. use of default temp directory created by bats&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-avoid-boilerplate-code"&gt;2. avoid boilerplate code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-override-an-environment-variable-when-using-bats-run"&gt;3. Override an environment variable when using bats run&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-override-a-bash-framework-function"&gt;4. Override a bash framework function&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-use-of-default-temp-directory-created-by-bats"&gt;1. use of default temp directory created by bats&lt;/h2&gt;
&lt;p&gt;Instead of creating yourself your temp directory, you can use the special variable &lt;code&gt;BATS_TEST_TMPDIR&lt;/code&gt;, this directory is
automatically destroyed at the end of the test except if the option &lt;code&gt;--no-tempdir-cleanup&lt;/code&gt; is provided to bats command.&lt;/p&gt;</description></item><item><title>How to Write Docker Compose Files</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-docker-compose/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-docker-compose/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-platform"&gt;1. platform&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-platform"&gt;1. platform&lt;/h2&gt;
&lt;p&gt;as not everyone is using the same environment (some are using MacOS for example which is targeting arm64 instead of
amd64), it is advised to add this option to target the right architecture&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;docker-compose platform&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;services&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;serviceName&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;platform&lt;/span&gt;&lt;span style="color:#000;font-weight:bold"&gt;:&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#000"&gt;linux/x86_64&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f8f8f8"&gt; &lt;/span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;# ...&lt;/span&gt;&lt;span style="color:#f8f8f8"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Jenkins Library</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/03-jenkins-library/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/03-jenkins-library/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-what-is-a-jenkins-shared-library-"&gt;1. What is a jenkins shared library ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-loading-libraries-dynamically"&gt;2. Loading libraries dynamically&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-jenkins-library-directory-structure"&gt;3. jenkins library directory structure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-jenkins-library"&gt;4. Jenkins library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-jenkins-library-structure"&gt;5. Jenkins library structure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-external-resource-usage"&gt;6. external resource usage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-what-is-a-jenkins-shared-library-"&gt;1. What is a jenkins shared library ?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;As Pipeline is adopted for more and more projects in an organization, common patterns are likely to emerge. Oftentimes
it is useful to share parts of Pipelines between various projects to reduce redundancies and keep code &amp;ldquo;DRY&amp;rdquo;&lt;/p&gt;</description></item><item><title>Jenkins Best Practices</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/04-jenkins-best-practices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/04-jenkins-best-practices/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-pipeline-best-practices"&gt;1. Pipeline best practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-shared-library-best-practices"&gt;2. Shared library best practices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-pipeline-best-practices"&gt;1. Pipeline best practices&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/#general"&gt;Official Jenkins pipeline best practices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Summary:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Make sure to use Groovy code in Pipelines as glue&lt;/li&gt;
&lt;li&gt;Externalize shell scripts from Jenkins Pipeline
&lt;ul&gt;
&lt;li&gt;for better jenkinsfile readability&lt;/li&gt;
&lt;li&gt;in order to test the scripts isolated from jenkins&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Avoid complex Groovy code in Pipelines
&lt;ul&gt;
&lt;li&gt;Groovy code &lt;strong&gt;always&lt;/strong&gt; executes on controller which means using controller resources(memory and CPU)
&lt;ul&gt;
&lt;li&gt;it is not the case for shell scripts&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;eg1: prefer using &lt;strong&gt;jq&lt;/strong&gt; inside shell script instead of groovy JsonSlurper&lt;/li&gt;
&lt;li&gt;eg2: prefer calling &lt;strong&gt;curl&lt;/strong&gt; instead of groovy http request&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Reducing repetition of similar Pipeline steps (eg: one sh step instead of severals)
&lt;ul&gt;
&lt;li&gt;group similar steps together to avoid step creation/destruction overhead&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Avoiding calls to Jenkins.getInstance&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-shared-library-best-practices"&gt;2. Shared library best practices&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/#using-shared-libraries"&gt;Official Jenkins shared libraries best practices&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Saml2Aws Setup</title><link>https://fchastanet.github.io/my-documents/docs/howtos/saml2aws/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/saml2aws/</guid><description>&lt;p&gt;Configure saml2aws accounts&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;saml2aws configure &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --idp-account&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;lt;account_alias&amp;gt;&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --idp-provider&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;AzureAD&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --mfa&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Auto&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --profile&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;lt;profile&amp;gt;&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --url&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;https://account.activedirectory.windowsazure.com&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --username&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;lt;username&amp;gt;@microsoft.com&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --app-id&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;lt;app_id&amp;gt;&amp;#39;&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --skip-prompt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;app_id&amp;gt;&lt;/code&gt; is a unique identifier for the application we want credentials for (in this case an AWS environment).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;account_alias&amp;gt;&lt;/code&gt; serves as a name to identify the saml2aws configuration (see your ~/.saml2aws file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;profile&amp;gt;&lt;/code&gt; serves as the name of the aws cli profile that will be created when you log in.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This will automatically identify your tenant ID based on the AppID and will create a configuration based on the provided
information. Configuration will be created in ~/.saml2aws&lt;/p&gt;</description></item><item><title>Annotated Jenkinsfiles - Part 1</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/05-annotated-jenkinsfiles--p1/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/05-annotated-jenkinsfiles--p1/</guid><description>&lt;p&gt;&lt;a href="https://www.jenkins.io/doc/book/pipeline/#pipeline-example"&gt;Pipeline example&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="1-simple-one"&gt;1. Simple one&lt;/h2&gt;
&lt;p&gt;This build is used to generate docker images used to build production code and launch phpunit tests. This pipeline is
parameterized in the Jenkins UI directly with the parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;branch (git branch to use)&lt;/li&gt;
&lt;li&gt;environment(select with 3 options: build, phpunit or all)
&lt;ul&gt;
&lt;li&gt;it would have been better to use simply 2 checkboxes phpunit/build&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;project_branch&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here the source code with inline comments:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Annotated jenkinsfile&lt;/strong&gt; Expand source&lt;/p&gt;</description></item><item><title>Annotated Jenkinsfiles - Part 2</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/06-annotated-jenkinsfiles--p2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/06-annotated-jenkinsfiles--p2/</guid><description>&lt;h2 id="1-introduction"&gt;1. Introduction&lt;/h2&gt;
&lt;p&gt;This example is missing the use of parameters, jenkins library in order to reuse common code&lt;/p&gt;
&lt;p&gt;This example uses :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;post conditions
&lt;a href="https://www.jenkins.io/doc/book/pipeline/syntax/#post"&gt;https://www.jenkins.io/doc/book/pipeline/syntax/#post&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;github plugin to set commit status indicating the result of the build&lt;/li&gt;
&lt;li&gt;usage of &lt;strong&gt;several jenkins plugins&lt;/strong&gt;, you can check here to get the full list installed on your server and even
&lt;strong&gt;generate code snippets&lt;/strong&gt; by adding &lt;strong&gt;pipeline-syntax/&lt;/strong&gt; to your jenkins server url&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But it misses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;usage of &lt;a href="https://www.jenkins.io/doc/book/pipeline/syntax/#parameters"&gt;inline parameters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;usage of jenkins library to reuse common code
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/fchastanet/jenkins-library/blob/master/src/fchastanet/Git.groovy#L156"&gt;Git updateConditionalGithubCommitStatus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/fchastanet/jenkins-library/blob/master/src/fchastanet/Docker.groovy#L46"&gt;Docker pullBuildPushImage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;check &lt;a href="https://www.jenkins.io/doc/book/pipeline/syntax/"&gt;Pipeline syntax documentation&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Annotated Jenkinsfiles - Part 3</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/07-annotated-jenkinsfiles--p3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/07-annotated-jenkinsfiles--p3/</guid><description>&lt;h2 id="1-introduction"&gt;1. Introduction&lt;/h2&gt;
&lt;p&gt;This build will:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pull/build/push docker image used to generate project files&lt;/li&gt;
&lt;li&gt;lint&lt;/li&gt;
&lt;li&gt;run Unit tests with coverage&lt;/li&gt;
&lt;li&gt;build the SPA&lt;/li&gt;
&lt;li&gt;run accessibility tests&lt;/li&gt;
&lt;li&gt;build story book and deploy it&lt;/li&gt;
&lt;li&gt;deploy spa on s3 bucket and refresh cloudflare cache&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It allows to build for production and qa stages allowing different instances. Every build contains:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a summary of the build
&lt;ul&gt;
&lt;li&gt;git branch&lt;/li&gt;
&lt;li&gt;git revision&lt;/li&gt;
&lt;li&gt;target environment&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;all the available Urls:
&lt;ul&gt;
&lt;li&gt;spa url&lt;/li&gt;
&lt;li&gt;storybook url&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-annotated-jenkinsfile"&gt;2. Annotated Jenkinsfile&lt;/h2&gt;
&lt;!-- markdownlint-disable MD013 --&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;// anonymized parameters
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;credentialsId&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;jenkinsCredentialId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;library&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;identifier:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;jenkins_library@v1.0&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;retriever:&lt;/span&gt; &lt;span style="color:#000"&gt;modernSCM&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;GitSCMSource&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;remote:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;git@github.com:fchastanet/jenkins-library.git&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;credentialsId:&lt;/span&gt; &lt;span style="color:#000"&gt;credentialsId&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;mail&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Mail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;utils&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Utils&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;cloudflare&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Cloudflare&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;// anonymized parameters
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;CLOUDFLARE_ZONE_ID&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;cloudflareZoneId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;CLOUDFLARE_ZONE_ID_PROD&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;cloudflareZoneIdProd&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REGISTRY_ID_QA&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;dockerRegistryId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REACT_APP_PENDO_API_KEY&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;pendoApiKey&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REGISTRY_QA&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;REGISTRY_ID_QA&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;.dkr.ecr.us-east-1.amazonaws.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;IMAGE_NAME_SPA&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;project-ui&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;STAGING_API_URL&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;https://api.host&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;INSTANCE_URL&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;https://${params.instanceName}.host&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REACT_APP_API_BASE_URL_PROD&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;https://ui.host&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REACT_APP_PENDO_SOURCE_DOMAIN&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;https://cdn.eu.pendo.io&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;buildBucketPrefix&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;S3_PUBLIC_URL&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;qa-spa.s3.amazonaws.com/project&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;S3_PROD_PUBLIC_URL&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;spa.s3.amazonaws.com/project&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;List&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color:#000"&gt;String&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#000"&gt;instanceChoices&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;1&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;..&lt;/span&gt;&lt;span style="color:#0000cf;font-weight:bold"&gt;20&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;).&lt;/span&gt;&lt;span style="color:#c4a000"&gt;collect&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;project&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;it&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;Map&lt;/span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;apiUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;storyBookAvailable:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;storyBookUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;storyBookDocsUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;spaAvailable:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;spaUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;instanceName:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;// add information on summary page
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;addBuildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;deployInfo&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;spaAvailable&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;formatInstanceName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;instanceName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34; (${buildInfo.instanceName})&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;deployInfo&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;lt;a href=&amp;#39;${buildInfo.spaUrl}&amp;#39;&amp;gt;SPA${formatInstanceName}&amp;lt;/a&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;storyBookAvailable&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;deployInfo&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34; / &amp;lt;a href=&amp;#39;${buildInfo.storyBookUrl}&amp;#39;&amp;gt;Storybook&amp;lt;/a&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;deployInfo&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34; / &amp;lt;a href=&amp;#39;${buildInfo.storyBookDocsUrl}&amp;#39;&amp;gt;Storybook docs&amp;lt;/a&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;summaryHtml&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;lt;b&amp;gt;branch : &amp;lt;/b&amp;gt;${GIT_BRANCH}&amp;lt;br/&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;lt;b&amp;gt;revision : &amp;lt;/b&amp;gt;${GIT_COMMIT}&amp;lt;br/&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;lt;b&amp;gt;target env : &amp;lt;/b&amp;gt;${params.targetEnv}&amp;lt;br/&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; ${deployInfo}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;removeHtmlBadges&lt;/span&gt; &lt;span style="color:#f57900"&gt;id:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;htmlBadge${currentBuild.number}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;addHtmlBadge&lt;/span&gt; &lt;span style="color:#f57900"&gt;html:&lt;/span&gt; &lt;span style="color:#000"&gt;summaryHtml&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#f57900"&gt;id:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;htmlBadge${currentBuild.number}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;pipeline&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;agent&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;node&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// this image has the features docker and lighthouse
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;label&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;docker-base-ubuntu-lighthouse&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;parameters&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;gitParameter&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;branchFilter:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;origin/(.*)&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;defaultValue:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;main&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;quickFilterEnabled:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;sortMode:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;ASCENDING_SMART&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;BRANCH&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;type:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;PT_BRANCH&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;choice&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;targetEnv&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;choices:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;testing&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;production&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Where it should be deployed to? (Default: none - No deploy)&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;booleanParam&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;buildStorybook&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;defaultValue:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Build Storybook (will only apply if selected targetEnv is testing)&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;choice&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;instanceName&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;choices:&lt;/span&gt; &lt;span style="color:#000"&gt;instanceChoices&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Instance name to deploy the revision&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stages&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Build SPA image&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// set build status to pending on github commit
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;step&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;&lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;GitHubSetCommitStatusBuilder&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;wrap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;&lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;BuildUser&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;currentBuild&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;displayName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;#${currentBuild.number}_${BRANCH}_${BUILD_USER}_${targetEnv}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;branchName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;getTagCompatibleFromBranch&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;GIT_BRANCH&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;shortSha&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;getShortCommitSha&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;GIT_BRANCH&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;production&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildBucketPrefix&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;GIT_COMMIT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;apiUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;REACT_APP_API_BASE_URL_PROD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;s3BaseUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;s3://project-spa/project&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;else&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildBucketPrefix&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;instanceName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;instanceName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;instanceName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;spaUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${INSTANCE_URL}/index.html&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;apiUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;STAGING_API_URL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;s3BaseUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;s3://project-qa-spa/project&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;storyBookUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${INSTANCE_URL}/storybook/index.html&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;storyBookDocsUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${INSTANCE_URL}/storybook-docs/index.html&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;addBuildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// Setup .env
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; set -x
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; echo &amp;#34;REACT_APP_API_BASE_URL = &amp;#39;${buildInfo.apiUrl}&amp;#39;&amp;#34; &amp;gt; ./.env
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; echo &amp;#34;REACT_APP_PENDO_SOURCE_DOMAIN = &amp;#39;${REACT_APP_PENDO_SOURCE_DOMAIN}&amp;#39;&amp;#34; &amp;gt;&amp;gt; ./.env
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; echo &amp;#34;REACT_APP_PENDO_API_KEY = &amp;#39;${REACT_APP_PENDO_API_KEY}&amp;#39;&amp;#34; &amp;gt;&amp;gt; ./.env
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;withCredentials&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sshUserPrivateKey&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;credentialsId:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;sshCredentialsId&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;keyFileVariable:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;sshKeyFile&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;pullBuildPushImage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;buildDirectory:&lt;/span&gt; &lt;span style="color:#000"&gt;pwd&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// use safer way to inject ssh key during docker build
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;buildArgs:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;--ssh default=\$sshKeyFile --build-arg USER_ID=\$(id -u)&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;registryImageUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${REGISTRY_QA}/${IMAGE_NAME_SPA}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tagPrefix:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${IMAGE_NAME_SPA}:&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;localTagName:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;latest&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;shortSha&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;branchName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;pullTags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;main&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Linting&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; docker run --rm \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v ${env.WORKSPACE}:/app \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v /app/node_modules \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; ${IMAGE_NAME_SPA} \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; npm run lint
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;UT&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;docker run --rm \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v ${env.WORKSPACE}:/app \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v /app/node_modules \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; ${IMAGE_NAME_SPA} \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; npm run test:coverage -- --ci
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;junit&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;output/junit.xml&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// https://plugins.jenkins.io/clover/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;step&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;CloverPublisher&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;cloverReportDir:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;output/coverage&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;cloverReportFileName:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;clover.xml&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;healthyTarget:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;methodCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;70&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;conditionalCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;70&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;statementCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;70&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// build will not fail but be set as unhealthy if coverage goes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// below 60%
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;unhealthyTarget:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;methodCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;60&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;conditionalCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;60&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;statementCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;60&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// build will fail if coverage goes below 50%
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;failingTarget:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;methodCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;50&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;conditionalCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;50&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;statementCoverage:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;50&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Build SPA&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; docker run --rm \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v ${env.WORKSPACE}:/app \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v /app/node_modules \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; ${IMAGE_NAME_SPA}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Accessibility tests&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// the pa11y-ci could have been made available in the node image
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// to avoid installation each time, the build is launched
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; sudo npm install -g serve pa11y-ci
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; serve -s build &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; pa11y-ci --threshold 5 http://127.0.0.1:3000
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Build Storybook&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;whenOrSkip&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;testing&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;buildStorybook&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; docker run --rm \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v ${env.WORKSPACE}:/app \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v /app/node_modules \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; ${IMAGE_NAME_SPA} \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; sh -c &amp;#39;npm run storybook:build -- --output-dir build/storybook \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;amp;&amp;amp; npm run storybook:build-docs -- --output-dir build/storybook-docs&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;storyBookAvailable&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Artifacts to S3&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;whenOrSkip&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;!=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;production&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;utils&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;initAws&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;arn:aws:iam::awsIamId:role/JenkinsSlave&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;aws s3 cp ${env.WORKSPACE}/build ${s3BaseUrl}/${buildBucketPrefix} --recursive --no-progress&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;aws s3 cp ${env.WORKSPACE}/build ${s3BaseUrl}/project1 --recursive --no-progress&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;production&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;project SPA packages have been pushed to production bucket.&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&amp;#39;You can refresh the production indexes with the CD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; production pipeline.&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;cloudflare&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;zonePurge&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;CLOUDFLARE_ZONE_ID_PROD&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#f57900"&gt;prefixes:&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${S3_PROD_PUBLIC_URL}/project1/&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;]])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;else&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;cloudflare&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;zonePurge&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;CLOUDFLARE_ZONE_ID&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#f57900"&gt;prefixes:&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${S3_PUBLIC_URL}/${buildBucketPrefix}/&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;]])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;spaAvailable&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;publishChecks&lt;/span&gt; &lt;span style="color:#f57900"&gt;detailsURL:&lt;/span&gt; &lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;spaUrl&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;projectSpaUrl&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;title:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;project SPA url&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;addBuildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;buildInfo&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;post&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;always&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;updateConditionalGithubCommitStatus&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;mail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;sendConditionalEmail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- markdownlint-enable MD013 --&gt;</description></item><item><title>Annotated Jenkinsfiles - Part 4</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/08-annotated-jenkinsfiles--p4/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/08-annotated-jenkinsfiles--p4/</guid><description>&lt;h2 id="1-introduction"&gt;1. introduction&lt;/h2&gt;
&lt;p&gt;The project aim is to create a browser extension available on chrome and firefox&lt;/p&gt;
&lt;p&gt;This build allows to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lint the project using megalinter and phpstorm inspection&lt;/li&gt;
&lt;li&gt;build necessary docker images&lt;/li&gt;
&lt;li&gt;build firefox and chrome extensions&lt;/li&gt;
&lt;li&gt;deploy firefox extension on s3 bucket&lt;/li&gt;
&lt;li&gt;deploy chrome extension on google play store&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-annotated-jenkinsfile"&gt;2. Annotated Jenkinsfile&lt;/h2&gt;
&lt;!-- markdownlint-disable MD013 --&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;credentialsId&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;jenkinsSshCredentialsId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;library&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;identifier:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;jenkins_library&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;retriever:&lt;/span&gt; &lt;span style="color:#000"&gt;modernSCM&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;GitSCMSource&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;remote:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;git@github.com:fchastanet/jenkins-library.git&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;credentialsId:&lt;/span&gt; &lt;span style="color:#000"&gt;credentialsId&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;mail&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;lib&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;fchastanet&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;Mail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;new&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;deploymentBranchTagCompatible&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;gitShortSha&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REGISTRY_URL&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;dockerRegistryId.dkr.ecr.eu-west-1.amazonaws.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;ECR_BROWSER_EXTENSION_BUILD&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;browser_extension_lint&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;BUILD_TAG&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;build&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;PHPSTORM_TAG&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;phpstorm-inspections&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;REFERENCE_JOB_NAME&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Browser_extension_deploy&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;FIREFOX_S3_BUCKET&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;browser-extensions&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;// it would have been easier to use checkboxes to avoid &amp;#39;both&amp;#39;/&amp;#39;none&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;// complexity
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;DEPLOY_CHROME&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetStore&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;both&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;||&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetStore&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;chrome&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;DEPLOY_FIREFOX&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetStore&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;both&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;||&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetStore&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;firefox&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;pipeline&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;agent&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;node&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;label&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;docker-base-ubuntu&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;parameters&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;gitParameter&lt;/span&gt; &lt;span style="color:#f57900"&gt;branchFilter:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;origin/(.*)&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;defaultValue:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;master&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;quickFilterEnabled:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;sortMode:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;ASCENDING_SMART&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;BRANCH&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;type:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;PT_BRANCH&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;choice&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;targetStore&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;choices:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;both&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;chrome&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;firefox&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Where it should be deployed to? (Default: none, has effect only on master branch)&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;environment&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;GOOGLE_CREDS&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;credentials&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;GoogleApiChromeExtension&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;GOOGLE_TOKEN&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;credentials&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;GoogleApiChromeExtensionCode&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;GOOGLE_APP_ID&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;googleAppId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// provided by https://addons.mozilla.org/en-US/developers/addon/api/key/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;FIREFOX_CREDS&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;credentials&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;MozillaApiFirefoxExtension&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;FIREFOX_APP_ID&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;{d4ce8a6f-675a-4f74-b2ea-7df130157ff4}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stages&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Init&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;deploymentBranchTagCompatible&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;getTagCompatibleFromBranch&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;GIT_BRANCH&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;gitShortSha&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;getShortCommitSha&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;GIT_BRANCH&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Branch ${env.GIT_BRANCH}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Docker tag = ${deploymentBranchTagCompatible}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;git short sha = ${gitShortSha}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;echo StrictHostKeyChecking=no &amp;gt;&amp;gt; ~/.ssh/config&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Lint&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;agent&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;image&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;megalinter/megalinter-javascript:v5&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;-u root -v ${WORKSPACE}:/tmp/lint --entrypoint=&amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;reuseNode&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;npm install stylelint-config-rational-order&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;/entrypoint.sh&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Build docker images&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// whenOrSkip directive is defined in https://github.com/fchastanet/jenkins-library/blob/master/vars/whenOrSkip.groovy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;whenOrSkip&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;currentBuild&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;currentResult&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;SUCCESS&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;pullBuildPushImage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;buildDirectory:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;build&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;registryImageUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${REGISTRY_URL}/${ECR_BROWSER_EXTENSION_BUILD}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tagPrefix:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${ECR_BROWSER_EXTENSION_BUILD}:&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${BUILD_TAG}_${gitShortSha}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${BUILD_TAG}_${deploymentBranchTagCompatible}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;pullTags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;${BUILD_TAG}_master&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Build firefox/chrome extensions&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;whenOrSkip&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;currentBuild&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;currentResult&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;SUCCESS&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; docker run \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v \$(pwd):/deploy \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; --rm &amp;#39;${ECR_BROWSER_EXTENSION_BUILD}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; /deploy/build/build-extensions.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// multiple git statuses can be set on a given commit
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// you can configure github to authorize pull request merge
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// based on the presence of one or more github statuses
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;updateGithubCommitStatus&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;BUILD_OK&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Deploy extensions&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// deploy both extensions in parallel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;parallel&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Deploy chrome&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;whenOrSkip&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;currentBuild&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;currentResult&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;SUCCESS&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#000"&gt;DEPLOY_CHROME&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// do not fail the entire build if this stage fail
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// so firefox stage can be executed
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;catchError&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#f57900"&gt;buildResult:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;SUCCESS&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#f57900"&gt;stageResult:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;FAILURE&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// best practice: complex sh files have been created outside
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// of this jenkinsfile deploy-chrome-extension.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; docker run \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v \$(pwd):/deploy \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e APP_CREDS_USR=&amp;#39;${GOOGLE_CREDS_USR}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e APP_CREDS_PSW=&amp;#39;${GOOGLE_CREDS_PSW}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e APP_TOKEN=&amp;#39;${GOOGLE_APP_TOKEN}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e APP_ID=&amp;#39;${GOOGLE_APP_ID}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; --rm &amp;#39;${ECR_BROWSER_EXTENSION_BUILD}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; /deploy/build/deploy-chrome-extension.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;updateGithubCommitStatus&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;CHROME_DEPLOYED&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Deploy firefox&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;whenOrSkip&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;currentBuild&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;currentResult&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;SUCCESS&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#000"&gt;DEPLOY_FIREFOX&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;catchError&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#f57900"&gt;buildResult:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;SUCCESS&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#f57900"&gt;stageResult:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;FAILURE&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// best practice: complex sh files have been created outside
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// of this jenkinsfile deploy-firefox-extension.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; docker run \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -v \$(pwd):/deploy \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e FIREFOX_JWT_ISSUER=&amp;#39;${FIREFOX_CREDS_USR}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e FIREFOX_JWT_SECRET=&amp;#39;${FIREFOX_CREDS_PSW}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; -e FIREFOX_APP_ID=&amp;#39;${FIREFOX_APP_ID}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; --rm &amp;#39;${ECR_BROWSER_EXTENSION_BUILD}&amp;#39; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; /deploy/build/deploy-firefox-extension.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;sh&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; set -x
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; set -o errexit
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; extensionVersion=&amp;#34;\$(jq -r .version &amp;lt; package.json)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; extensionFilename=&amp;#34;tools-\${extensionVersion}-an+fx.xpi&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; echo &amp;#34;Upload new extension \${extensionFilename} to s3 bucket ${FIREFOX_S3_BUCKET}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; aws s3 cp &amp;#34;\$(pwd)/packages/\${extensionFilename}&amp;#34; &amp;#34;s3://${FIREFOX_S3_BUCKET}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; aws s3api put-object-acl --bucket &amp;#34;${FIREFOX_S3_BUCKET}&amp;#34; --key &amp;#34;\${extensionFilename}&amp;#34; --acl public-read
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; # url is https://tools.s3.eu-west-1.amazonaws.com/tools-2.5.6-an%2Bfx.xpi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; echo &amp;#34;Upload new version as current version&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; aws s3 cp &amp;#34;\$(pwd)/packages/\${extensionFilename}&amp;#34; &amp;#34;s3://${FIREFOX_S3_BUCKET}/tools-an+fx.xpi&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; aws s3api put-object-acl --bucket &amp;#34;${FIREFOX_S3_BUCKET}&amp;#34; --key &amp;#34;tools-an+fx.xpi&amp;#34; --acl public-read
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; # url is https://tools.s3.eu-west-1.amazonaws.com/tools-an%2Bfx.xpi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; echo &amp;#34;Upload updates.json file&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; aws s3 cp &amp;#34;\$(pwd)/packages/updates.json&amp;#34; &amp;#34;s3://${FIREFOX_S3_BUCKET}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; aws s3api put-object-acl --bucket &amp;#34;${FIREFOX_S3_BUCKET}&amp;#34; --key &amp;#34;updates.json&amp;#34; --acl public-read
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; # url is https://tools.s3.eu-west-1.amazonaws.com/updates.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;updateGithubCommitStatus&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;FIREFOX_DEPLOYED&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;post&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;always&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;archiveArtifacts&lt;/span&gt; &lt;span style="color:#f57900"&gt;artifacts:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;report/mega-linter.log&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;archiveArtifacts&lt;/span&gt; &lt;span style="color:#f57900"&gt;artifacts:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;report/linters_logs/*&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;archiveArtifacts&lt;/span&gt; &lt;span style="color:#f57900"&gt;artifacts:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;packages/*&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#f57900"&gt;fingerprint:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#f57900"&gt;allowEmptyArchive:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// send email to the builder and culprits of the current commit
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// culprits are the committers since the last commit successfully built
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;mail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;sendConditionalEmail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;updateConditionalGithubCommitStatus&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;success&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetStore&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;!=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;GIT_BRANCH&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;origin/master&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// send an email to a teams channel so every collaborators knows
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// when a production ready extension has been deployed
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;mail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;sendSuccessfulEmail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;teamsChannelId.onmicrosoft.com@amer.teams.ms&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- markdownlint-enable MD013 --&gt;</description></item><item><title>Annotated Jenkinsfiles - Part 5</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/09-annotated-jenkinsfiles--p5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/09-annotated-jenkinsfiles--p5/</guid><description>&lt;h2 id="1-introduction"&gt;1. introduction&lt;/h2&gt;
&lt;p&gt;In jenkins library you can create your own directive that allows to generate jenkinsfile code. Here we will use this
feature to generate a complete Jenkinsfile.&lt;/p&gt;
&lt;h2 id="2-annotated-jenkinsfile"&gt;2. Annotated Jenkinsfile&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;library&lt;/span&gt; &lt;span style="color:#f57900"&gt;identifier:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;jenkins_library@v1.0&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;retriever:&lt;/span&gt; &lt;span style="color:#000"&gt;modernSCM&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;GitSCMSource&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;remote:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;git@github.com:fchastanet/jenkins-library.git&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;credentialsId:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;jenkinsCredentialsId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#000"&gt;djangoApiPipeline&lt;/span&gt; &lt;span style="color:#f57900"&gt;repoUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;git@github.com:fchastanet/django_api_project.git&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;imageName:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;django_api&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="3-annotated-library-custom-directive"&gt;3. Annotated library custom directive&lt;/h2&gt;
&lt;p&gt;In the jenkins library just add a file named &lt;code&gt;vars/djangoApiPipeline.groovy&lt;/code&gt; with the following content&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#!/usr/bin/env groovy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;call&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;Map&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// content of your pipeline
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="4-annotated-library-custom-directive-djangoapipipelinegroovy"&gt;4. Annotated library custom directive djangoApiPipeline.groovy&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;display:grid;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex; background-color:#dfdfdf"&gt;&lt;span&gt;&lt;span style="color:#8f5902;font-style:italic"&gt;#!/usr/bin/env groovy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;call&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;Map&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;gitUtil&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;new&lt;/span&gt; &lt;span style="color:#000"&gt;Git&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;mailUtil&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;new&lt;/span&gt; &lt;span style="color:#000"&gt;Mail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;dockerUtil&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;new&lt;/span&gt; &lt;span style="color:#000"&gt;Docker&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;kubernetesUtil&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;new&lt;/span&gt; &lt;span style="color:#000"&gt;Kubernetes&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;testUtil&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;new&lt;/span&gt; &lt;span style="color:#000"&gt;Tests&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#204a87;font-weight:bold"&gt;this&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;workerLabelNonProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;workerLabelNonProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;eks-nonprod&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;workerLabelProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;workerLabelProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;docker-ubuntu-prod-eks&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;awsRegionNonProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;workerLabelNonProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;eks-nonprod&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;us-east-1&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;eu-west-1&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;awsRegionProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;eu-central-1&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;regionName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;prod&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?&lt;/span&gt; &lt;span style="color:#000"&gt;awsRegionProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#000"&gt;awsRegionNonProd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;teamsEmail&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;teamsEmail&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;teamsChannel.onmicrosoft.com@amer.teams.ms&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;helmDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;helmDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;./helm&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;Boolean&lt;/span&gt; &lt;span style="color:#000"&gt;sendCortexMetrics&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;sendCortexMetrics&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;Boolean&lt;/span&gt; &lt;span style="color:#000"&gt;skipTests&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;skipTests&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;List&lt;/span&gt; &lt;span style="color:#000"&gt;environments&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;environments&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;qa&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;prod&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;Short&lt;/span&gt; &lt;span style="color:#000"&gt;skipBuild&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;pipeline&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;agent&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;node&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;label&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;prod&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?&lt;/span&gt; &lt;span style="color:#000"&gt;workerLabelProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#000"&gt;workerLabelNonProd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;parameters&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;gitParameter&lt;/span&gt; &lt;span style="color:#f57900"&gt;branchFilter:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;origin/(.*)&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;defaultValue:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;main&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;quickFilterEnabled:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;sortMode:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;ASCENDING_SMART&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;BRANCH&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;type:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;PT_BRANCH&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;choice&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;targetEnv&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;choices:&lt;/span&gt; &lt;span style="color:#000"&gt;environments&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Where it should be deployed to? (Default: none - No deploy)&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;string&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;instance&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;defaultValue:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&amp;#39;The instance ID to define which QA instance it should
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; be deployed to (Will only apply if targetEnv is qa). Default is 1 for
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; CK and 01 for Darwin&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;booleanParam&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;suspendCron&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;defaultValue:&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;true&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Suspend cron jobs scheduling&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;choice&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;name:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;upStreamImage&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;choices:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;latest&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;beta&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;description:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&amp;#39;Select beta to check if your build works with the
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; future version of the upstream image&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stages&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Checkout from SCM&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Checking out from origin/${BRANCH} branch&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;gitUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;branchCheckout&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;babee6c1-14fe-4d90-9da0-ffa7068c69af&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;repoUrl&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;${BRANCH}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;wrap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;([&lt;/span&gt;&lt;span style="color:#000"&gt;$class&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;BuildUser&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;def&lt;/span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;displayName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;#${currentBuild.number}_${BRANCH}_${BUILD_USER}_${targetEnv}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;qa&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;||&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;qe&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;displayName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${displayName}_${instance}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;currentBuild&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;displayName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;displayName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;imageName&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;BUILD_TAG&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;toLowerCase&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;buildDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;buildDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;buildDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;/&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;runCoverage&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;runCoverage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;shortSha&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;gitUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;getShortCommitSha&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;env&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;GIT_BRANCH&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;skipBuild&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;dockerUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;checkImage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;imageName&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#000"&gt;shortSha&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Build&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;when&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;expression&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;return&lt;/span&gt; &lt;span style="color:#000"&gt;skipBuild&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;!=&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;0&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;registryUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;dockerRegistryId.dkr.ecr.&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;awsRegionNonProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;.amazonaws.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;String&lt;/span&gt; &lt;span style="color:#000"&gt;buildDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;?.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;buildDirectory&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?:&lt;/span&gt; &lt;span style="color:#000"&gt;pwd&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;prod&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;registryUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;dockerRegistryId.dkr.ecr.&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;awsRegionProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;.amazonaws.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;dockerUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;pullBuildImage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;registryImageUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${registryUrl}/${args.imageName}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;pullTags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${params.targetEnv}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;buildDirectory:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${buildDirectory}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;buildArgs:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;--build-arg UPSTREAM_VERSION=${params.upStreamImage}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tagPrefix:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.imageName}:&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.shortSha}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Test&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;when&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;expression&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;return&lt;/span&gt; &lt;span style="color:#000"&gt;skipBuild&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;!=&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;0&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#000"&gt;skipTests&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;false&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;testUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;execTests&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;imageName&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#39;Push&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;when&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;expression&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;return&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;!=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;//pipeline execution starting time for CD part
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;Map&lt;/span&gt; &lt;span style="color:#000"&gt;argsMap&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[:]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;prod&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;registryUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;registryIdProd.dkr.ecr.&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;awsRegionProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;.amazonaws.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;else&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;registryUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;registryIdNonProd.dkr.ecr.&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;awsRegionNonProd&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;.amazonaws.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;argsMap&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;registryImageUrl:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${registryUrl}/${args.imageName}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;pullTags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.shortSha}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tagPrefix:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${registryUrl}/${args.imageName}:&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;localTagName:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.shortSha}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;tags:&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${params.targetEnv}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;skipBuild&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;0&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;dockerUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;promoteTag&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;argsMap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;else&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;argsMap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;remove&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;pullTags&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;argsMap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;put&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;tagPrefix&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.imageName}:&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;argsMap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;put&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;[&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;${env.shortSha}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;${params.targetEnv}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;dockerUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;tagPushImage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;argsMap&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;stage&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;Deploy to Kubernetes&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;when&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;expression&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;return&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;!=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;none&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;steps&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;prod&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// not sure it is a good practice as it forces the operator to
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#8f5902;font-style:italic"&gt;// wait for build to reach this stage
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;timeout&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#f57900"&gt;time:&lt;/span&gt; &lt;span style="color:#0000cf;font-weight:bold"&gt;300&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#f57900"&gt;unit:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;SECONDS&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;input&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;message:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;&amp;#34;&amp;#34;Do you want go ahead with ${env.shortSha}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#4e9a06"&gt; image tag for prod helm deploy?&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;ok:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;Yes&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;CHART_NAME&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;imageName&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;).&lt;/span&gt;&lt;span style="color:#c4a000"&gt;contains&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;_&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;imageName&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;).&lt;/span&gt;&lt;span style="color:#c4a000"&gt;replaceAll&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;_&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;-&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;args&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;imageName&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;qa&amp;#39;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;||&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;qe&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;helmValueFilePath&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${helmDirectory}&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;/value_files/values-&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;instance&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;.yaml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;NAMESPACE&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${CHART_NAME}-&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;instance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;else&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;helmValueFilePath&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${helmDirectory}&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;/value_files/values-&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;.yaml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;NAMESPACE&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${CHART_NAME}-&amp;#34;&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;+&lt;/span&gt; &lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;ingressUrl&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;=&lt;/span&gt; &lt;span style="color:#000"&gt;kubernetesUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;getIngressUrl&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;helmValueFilePath&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Deploying into k8s..&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Helm release: ${CHART_NAME}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Target env: ${params.targetEnv}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;Url: ${ingressUrl}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;echo&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;K8s namespace: ${NAMESPACE}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;kubernetesUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;deployHelmChart&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;chartName:&lt;/span&gt; &lt;span style="color:#000"&gt;CHART_NAME&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;nameSpace:&lt;/span&gt; &lt;span style="color:#000"&gt;NAMESPACE&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;imageTag:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.shortSha}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;helmDirectory:&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${helmDirectory}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f57900"&gt;helmValueFilePath:&lt;/span&gt; &lt;span style="color:#000"&gt;helmValueFilePath&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;post&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;always&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;script&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;gitUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;updateGithubCommitStatus&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#4e9a06"&gt;&amp;#34;${currentBuild.currentResult}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;,&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#34;${env.WORKSPACE}&amp;#34;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;mailUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;sendConditionalEmail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#204a87;font-weight:bold"&gt;if&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;params&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;targetEnv&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;==&lt;/span&gt; &lt;span style="color:#4e9a06"&gt;&amp;#39;prod&amp;#39;&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#000"&gt;mailUtil&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;.&lt;/span&gt;&lt;span style="color:#c4a000"&gt;sendTeamsNotification&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;(&lt;/span&gt;&lt;span style="color:#000"&gt;teamsEmail&lt;/span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ce5c00;font-weight:bold"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="5-final-thoughts-about-this-technique"&gt;5. Final thoughts about this technique&lt;/h2&gt;
&lt;p&gt;This technique is really useful when you have a lot of similar projects reusing over and over the same pipeline. It
allows:&lt;/p&gt;</description></item><item><title>Jenkins Recipes and Tips</title><link>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/10-jenkins-recipes-and-tips/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/howtos/howto-write-jenkinsfile/10-jenkins-recipes-and-tips/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-jenkins-snippet-generator"&gt;1. Jenkins snippet generator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-declarative-pipeline-allows-you-to-restart-a-build-from-a-given-stage"&gt;2. Declarative pipeline allows you to restart a build from a given stage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-replay-a-pipeline"&gt;3. Replay a pipeline&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-vs-code-jenkinsfile-validation"&gt;4. VS code Jenkinsfile validation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-how-to-chain-pipelines-"&gt;5. How to chain pipelines ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-viewing-pipelines-hierarchy"&gt;6. Viewing pipelines hierarchy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-jenkins-snippet-generator"&gt;1. Jenkins snippet generator&lt;/h2&gt;
&lt;p&gt;Use jenkins snippet generator by adding &lt;code&gt;/pipeline-syntax/&lt;/code&gt; to your jenkins pipeline. to allow you to generate jenkins
pipeline code easily with inline doc. It also list the available variables.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/snippetGenerator.png" alt="jenkins snippet generator"&gt;&lt;/p&gt;</description></item><item><title>My Documents - Static Site Generation Using Hugo</title><link>https://fchastanet.github.io/my-documents/docs/my-documents/my-documents-static-site-generation-using-hugo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/my-documents/my-documents-static-site-generation-using-hugo/</guid><description>&lt;h1 id="my-documents---static-site-generation-using-hugo---migration-analysis-and-implementation"&gt;My Documents - Static Site Generation Using Hugo - Migration Analysis and Implementation&lt;/h1&gt;
&lt;!--TOC--&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#my-documents---static-site-generation-using-hugo---migration-analysis-and-implementation"&gt;My Documents - Static Site Generation Using Hugo - Migration Analysis and Implementation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-technical-solutions-evaluated"&gt;1. Technical Solutions Evaluated&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#11-static-site-generator-solutions"&gt;1.1. Static Site Generator Solutions&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#111-hugo-selected"&gt;1.1.1. Hugo (SELECTED)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#112-astro"&gt;1.1.2. Astro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#113-11ty-eleventy"&gt;1.1.3. 11ty (Eleventy)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#114-vuepress-2"&gt;1.1.4. VuePress 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#115-mkdocs"&gt;1.1.5. MkDocs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#116-nextjs-and-gatsby"&gt;1.1.6. Next.js and Gatsby&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#117-comparison-summary"&gt;1.1.7. Comparison Summary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#12-multi-site-build-pipeline-solutions"&gt;1.2. Multi-Site Build Pipeline Solutions&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#121-centralized-orchestrator-my-documents-builds-all-sites-selected"&gt;1.2.1. Centralized Orchestrator (my-documents builds all sites) (SELECTED)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#122-decentralized-with-reusable-workflows--hugo-modules"&gt;1.2.2. Decentralized with Reusable Workflows + Hugo Modules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#123-true-monorepo-with-subdirectories"&gt;1.2.3. True Monorepo with Subdirectories&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#124-pipeline-solution-comparison"&gt;1.2.4. Pipeline Solution Comparison&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-chosen-solutions--rationale"&gt;2. Chosen Solutions &amp;amp; Rationale&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#21-static-site-generator-hugo--docsy-theme"&gt;2.1. Static Site Generator: Hugo + Docsy Theme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#22-multi-site-pipeline-centralized-orchestrator"&gt;2.2. Multi-Site Pipeline: Centralized Orchestrator&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-implementation-details"&gt;3. Implementation Details&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#31-repository-architecture"&gt;3.1. Repository Architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#32-directory-structure"&gt;3.2. Directory Structure&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#321-my-documents-orchestrator"&gt;3.2.1. my-documents (Orchestrator)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#322-dependent-repository-example-bash-compiler"&gt;3.2.2. Dependent Repository (Example: bash-compiler)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#33-configuration-merging-strategy"&gt;3.3. Configuration Merging Strategy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#34-build-workflow"&gt;3.4. Build Workflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#35-deployment-approach"&gt;3.5. Deployment Approach&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#36-trigger-mechanism"&gt;3.6. Trigger Mechanism&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#37-theme-customization"&gt;3.7. Theme Customization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-lessons-learned--future-considerations"&gt;4. Lessons Learned &amp;amp; Future Considerations&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#41-github-app-migration-from-deploy-keys"&gt;4.1. GitHub App Migration from Deploy Keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#42-trade-offs-discovered"&gt;4.2. Trade-offs Discovered&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#421-all-site-rebuild-trade-off"&gt;4.2.1. All-Site Rebuild Trade-off&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#422-authentication-complexity"&gt;4.2.2. Authentication Complexity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#423-configuration-flexibility-vs-consistency"&gt;4.2.3. Configuration Flexibility vs Consistency&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#43-best-practices-identified"&gt;4.3. Best Practices Identified&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#431-configuration-management"&gt;4.3.1. Configuration Management&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#432-build-optimization"&gt;4.3.2. Build Optimization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#433-dependency-management"&gt;4.3.3. Dependency Management&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#434-security"&gt;4.3.4. Security&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#44-future-considerations"&gt;4.4. Future Considerations&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#441-potential-optimizations"&gt;4.4.1. Potential Optimizations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#442-scalability-considerations"&gt;4.4.2. Scalability Considerations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#443-alternative-approaches-for-future-projects"&gt;4.4.3. Alternative Approaches for Future Projects&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#45-success-metrics"&gt;4.5. Success Metrics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-conclusion"&gt;5. Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--TOC--&gt;
&lt;p&gt;&lt;strong&gt;Project:&lt;/strong&gt; Migration from Docsify to Hugo with Docsy theme for multiple documentation repositories&lt;/p&gt;</description></item><item><title>My Documents - Technical Architecture and Documentation Site Implementation</title><link>https://fchastanet.github.io/my-documents/docs/my-documents/technical-architecture/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/my-documents/technical-architecture/</guid><description>&lt;h1 id="my-documents---technical-architecture-and-documentation-site-implementation"&gt;My Documents - Technical Architecture and Documentation Site Implementation&lt;/h1&gt;
&lt;!--TOC--&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#my-documents---technical-architecture-and-documentation-site-implementation"&gt;My Documents - Technical Architecture and Documentation Site Implementation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-documentation-site-built-with-hugo"&gt;1. Documentation Site Built with Hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-building-locally"&gt;2. Building Locally&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#21-prerequisites"&gt;2.1. Prerequisites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#22-quick-start"&gt;2.2. Quick Start&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#221-install-hugo"&gt;2.2.1. Install Hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#222-clone-and-setup"&gt;2.2.2. Clone and Setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#223-run-local-server"&gt;2.2.3. Run Local Server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#23-building-for-production"&gt;2.3. Building for Production&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#24-checking-site-statistics"&gt;2.4. Checking Site Statistics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-multi-site-orchestrator-architecture"&gt;3. Multi-Site Orchestrator Architecture&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#31-architecture-overview"&gt;3.1. Architecture Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#32-managed-documentation-sites"&gt;3.2. Managed Documentation Sites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#33-shared-vs-site-specific-resources"&gt;3.3. Shared vs Site-Specific Resources&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#34-how-it-works"&gt;3.4. How It Works&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#35-key-benefits"&gt;3.5. Key Benefits&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#36-testing-multi-site-locally"&gt;3.6. Testing Multi-Site Locally&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#37-makefile-commands"&gt;3.7. Makefile Commands&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-creating-a-new-documentation-site"&gt;4. Creating a New Documentation Site&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#41-prerequisites"&gt;4.1. Prerequisites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#42-step-by-step-guide"&gt;4.2. Step-by-Step Guide&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#421-step-1-prepare-the-new-repository"&gt;4.2.1. Step 1: Prepare the New Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#422-step-2-add-trigger-workflow"&gt;4.2.2. Step 2: Add Trigger Workflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#423-step-3-create-site-configuration-in-my-documents"&gt;4.2.3. Step 3: Create Site Configuration in my-documents&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#424-step-4-update-build-workflow-matrix"&gt;4.2.4. Step 4: Update Build Workflow Matrix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#425-step-5-configure-github-see-section-6-for-details"&gt;4.2.5. Step 5: Configure GitHub (See Section 6 for details)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#426-step-6-test-locally"&gt;4.2.6. Step 6: Test Locally&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#427-step-7-commit-and-deploy"&gt;4.2.7. Step 7: Commit and Deploy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#43-post-creation-checklist"&gt;4.3. Post-Creation Checklist&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-github-configuration"&gt;5. GitHub Configuration&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#51-architecture-github-app-authentication"&gt;5.1. Architecture: GitHub App Authentication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#52-required-secrets"&gt;5.2. Required Secrets&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#521-in-my-documents-repository"&gt;5.2.1. In my-documents Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#522-in-each-dependent-repository"&gt;5.2.2. In Each Dependent Repository&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#53-creating-the-github-app"&gt;5.3. Creating the GitHub App&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#531-step-1-create-github-app"&gt;5.3.1. Step 1: Create GitHub App&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#532-step-2-note-the-app-id"&gt;5.3.2. Step 2: Note the App ID&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#533-step-3-generate-private-key"&gt;5.3.3. Step 3: Generate Private Key&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#534-step-4-install-app-on-repositories"&gt;5.3.4. Step 4: Install App on Repositories&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#535-step-5-add-secrets-to-my-documents"&gt;5.3.5. Step 5: Add Secrets to my-documents&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#54-creating-personal-access-token-pat"&gt;5.4. Creating Personal Access Token (PAT)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#541-step-1-create-pat"&gt;5.4.1. Step 1: Create PAT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#542-step-2-add-to-each-dependent-repository"&gt;5.4.2. Step 2: Add to Each Dependent Repository&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#55-repository-settings"&gt;5.5. Repository Settings&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#551-github-pages-configuration"&gt;5.5.1. GitHub Pages Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#552-branch-protection-optional"&gt;5.5.2. Branch Protection (Optional)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-repository-integration"&gt;6. Repository Integration&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#61-files-and-folder-structure"&gt;6.1. Files and Folder Structure&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#611-required-structure-in-dependent-repository"&gt;6.1.1. Required Structure in Dependent Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#612-required-structure-in-my-documents-orchestrator"&gt;6.1.2. Required Structure in my-documents (Orchestrator)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#62-migration-guide"&gt;6.2. Migration Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#63-content-organization-best-practices"&gt;6.3. Content Organization Best Practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#64-repository-configuration-in-github"&gt;6.4. Repository Configuration in GitHub&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#641-step-1-add-required-secrets"&gt;6.4.1. Step 1: Add Required Secrets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#642-step-2-install-github-app"&gt;6.4.2. Step 2: Install GitHub App&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#643-step-3-configure-github-pages"&gt;6.4.3. Step 3: Configure GitHub Pages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#644-step-4-verify-workflow-permissions"&gt;6.4.4. Step 4: Verify Workflow Permissions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#645-step-5-test-the-integration"&gt;6.4.5. Step 5: Test the Integration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#646-common-integration-issues"&gt;6.4.6. Common Integration Issues&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7-authentication-setup-details"&gt;7. Authentication Setup Details&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#71-github-app-vs-deploy-keys-comparison"&gt;7.1. GitHub App vs Deploy Keys Comparison&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#72-github-app-complete-setup"&gt;7.2. GitHub App Complete Setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#73-personal-access-token-pat-setup"&gt;7.3. Personal Access Token (PAT) Setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#74-token-lifecycle-and-rotation"&gt;7.4. Token Lifecycle and Rotation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#741-github-app-tokens"&gt;7.4.1. GitHub App Tokens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#742-personal-access-tokens"&gt;7.4.2. Personal Access Tokens&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#75-troubleshooting-authentication"&gt;7.5. Troubleshooting Authentication&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8-troubleshooting-multi-site-builds"&gt;8. Troubleshooting Multi-Site Builds&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#81-build-failures"&gt;8.1. Build Failures&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#811-issue-matrix-build-fails-for-one-site"&gt;8.1.1. Issue: Matrix Build Fails for One Site&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#812-issue-all-sites-fail-to-build"&gt;8.1.2. Issue: All Sites Fail to Build&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#82-configuration-merge-issues"&gt;8.2. Configuration Merge Issues&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#821-issue-site-specific-config-not-applied"&gt;8.2.1. Issue: Site-Specific Config Not Applied&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#822-issue-configuration-merge-produces-invalid-yaml"&gt;8.2.2. Issue: Configuration Merge Produces Invalid YAML&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#83-deployment-failures"&gt;8.3. Deployment Failures&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#831-issue-github-app-authentication-fails"&gt;8.3.1. Issue: GitHub App Authentication Fails&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#832-issue-deploy-succeeds-but-site-not-updated"&gt;8.3.2. Issue: Deploy Succeeds but Site Not Updated&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#84-trigger-issues"&gt;8.4. Trigger Issues&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#841-issue-repository-dispatch-not-triggering-build"&gt;8.4.1. Issue: Repository Dispatch Not Triggering Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#842-issue-unwanted-builds-too-many-triggers"&gt;8.4.2. Issue: Unwanted Builds (Too Many Triggers)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#85-content-and-link-issues"&gt;8.5. Content and Link Issues&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#851-issue-internal-links-return-404"&gt;8.5.1. Issue: Internal Links Return 404&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#852-issue-images-not-displaying"&gt;8.5.2. Issue: Images Not Displaying&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#86-performance-issues"&gt;8.6. Performance Issues&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#861-issue-builds-taking-too-long"&gt;8.6.1. Issue: Builds Taking Too Long&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#87-debugging-checklist"&gt;8.7. Debugging Checklist&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#9-advanced-configuration-topics"&gt;9. Advanced Configuration Topics&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#91-configuration-merging-strategy"&gt;9.1. Configuration Merging Strategy&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#911-how-yq-deep-merge-works"&gt;9.1.1. How yq Deep-Merge Works&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#92-per-site-theme-customization"&gt;9.2. Per-Site Theme Customization&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#921-theme-colors"&gt;9.2.1. Theme Colors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#922-custom-logos"&gt;9.2.2. Custom Logos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#923-custom-cssscss"&gt;9.2.3. Custom CSS/SCSS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#93-seo-and-metadata-customization"&gt;9.3. SEO and Metadata Customization&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#931-per-site-seo-keywords"&gt;9.3.1. Per-Site SEO Keywords&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#932-custom-metadata"&gt;9.3.2. Custom Metadata&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#933-structured-data-json-ld"&gt;9.3.3. Structured Data (JSON-LD)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#94-menu-customization"&gt;9.4. Menu Customization&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#941-custom-navigation-menu"&gt;9.4.1. Custom Navigation Menu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#942-footer-links"&gt;9.4.2. Footer Links&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#95-performance-optimization"&gt;9.5. Performance Optimization&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#951-image-optimization"&gt;9.5.1. Image Optimization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#952-minification"&gt;9.5.2. Minification&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#953-html-rendering-optimization"&gt;9.5.3. HTML Rendering Optimization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#96-multi-language-support"&gt;9.6. Multi-Language Support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#97-search-configuration"&gt;9.7. Search Configuration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10-contributing-to-the-orchestrator"&gt;10. Contributing to the Orchestrator&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#101-types-of-contributions"&gt;10.1. Types of Contributions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#102-development-workflow"&gt;10.2. Development Workflow&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1021-step-1-fork-and-clone"&gt;10.2.1. Step 1: Fork and Clone&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1022-step-2-make-changes"&gt;10.2.2. Step 2: Make Changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1023-step-3-test-across-all-sites"&gt;10.2.3. Step 3: Test Across All Sites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1024-step-4-commit-with-conventional-commits"&gt;10.2.4. Step 4: Commit with Conventional Commits&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#103-testing-changes-locally"&gt;10.3. Testing Changes Locally&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1031-test-shared-layout-changes"&gt;10.3.1. Test Shared Layout Changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1032-test-configuration-changes"&gt;10.3.2. Test Configuration Changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1033-test-workflow-changes"&gt;10.3.3. Test Workflow Changes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#104-best-practices-for-contributors"&gt;10.4. Best Practices for Contributors&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1041-shared-components"&gt;10.4.1. Shared Components&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1042-configuration-changes"&gt;10.4.2. Configuration Changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1043-workflow-improvements"&gt;10.4.3. Workflow Improvements&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#105-code-review-process"&gt;10.5. Code Review Process&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#106-adding-new-shared-features"&gt;10.6. Adding New Shared Features&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1061-example-adding-a-new-partial"&gt;10.6.1. Example: Adding a New Partial&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#107-release-process"&gt;10.7. Release Process&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1071-versioning"&gt;10.7.1. Versioning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1072-deprecation-policy"&gt;10.7.2. Deprecation Policy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#108-getting-help"&gt;10.8. Getting Help&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#11-documentation-structure"&gt;11. Documentation Structure&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#111-adding-new-documentation"&gt;11.1. Adding New Documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#12-content-guidelines"&gt;12. Content Guidelines&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#13-seo-features"&gt;13. SEO Features&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#14-cicd-pipelines"&gt;14. CI/CD Pipelines&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#141-build-all-sites-build-all-sitesyml"&gt;14.1. Build All Sites (build-all-sites.yml)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#142-hugo-build--deploy-hugo-build-deployyml"&gt;14.2. Hugo Build &amp;amp; Deploy (hugo-build-deploy.yml)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#143-pre-commit-linting-lintyml"&gt;14.3. Pre-commit Linting (lint.yml)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--TOC--&gt;
&lt;h2 id="1-documentation-site-built-with-hugo"&gt;1. Documentation Site Built with Hugo&lt;/h2&gt;
&lt;p&gt;This repository contains documentation built with
&lt;a href="https://gohugo.io/"&gt;Hugo&lt;/a&gt; static site generator and the
&lt;a href="https://www.docsy.dev/"&gt;Docsy&lt;/a&gt; theme. All content is in Markdown format and
automatically published to GitHub Pages.&lt;/p&gt;</description></item><item><title>My Documents - Trigger Reusable Workflow Documentation</title><link>https://fchastanet.github.io/my-documents/docs/my-documents/trigger-my-documents-workflow/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/my-documents/trigger-my-documents-workflow/</guid><description>&lt;!--TOC--&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#trigger-my-documents-reusable-workflow"&gt;Trigger My-Documents Reusable Workflow&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1-overview"&gt;1. Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2-quick-start"&gt;2. Quick Start&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#21-basic-usage"&gt;2.1. Basic Usage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#3-how-it-works"&gt;3. How It Works&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#31-architecture"&gt;3.1. Architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#32-authentication-flow"&gt;3.2. Authentication Flow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#4-configuration"&gt;4. Configuration&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#41-input-parameters"&gt;4.1. Input Parameters&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#42-advanced-usage-examples"&gt;4.2. Advanced Usage Examples&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#421-custom-documentation-url"&gt;4.2.1. Custom Documentation URL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#422-different-target-repository"&gt;4.2.2. Different Target Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#423-manual-trigger-with-custom-event-type"&gt;4.2.3. Manual Trigger with Custom Event Type&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5-complete-example"&gt;5. Complete Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6-secrets-configuration"&gt;6. Secrets Configuration&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#61-in-my-documents-repository"&gt;6.1. In my-documents Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#62-in-dependent-repositories"&gt;6.2. In Dependent Repositories&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7-understanding-secrets-inherit-and-access-control"&gt;7. Understanding Secrets: Inherit and Access Control&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#71-what-is-secrets-inherit"&gt;7.1. What is &lt;code&gt;secrets: inherit&lt;/code&gt;?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#72-how-does-it-work-for-dependent-repositories"&gt;7.2. How Does It Work for Dependent Repositories?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#73-secret-access-hierarchy"&gt;7.3. Secret Access Hierarchy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#74-why-this-workflow-cant-be-used-by-others"&gt;7.4. Why This Workflow Can&amp;rsquo;t Be Used by Others&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#741-reason-1-github-app-is-organization-specific"&gt;7.4.1. Reason 1: GitHub App is Organization-Specific&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#742-reason-2-github-app-has-no-access-to-other-organizations"&gt;7.4.2. Reason 2: GitHub App Has No Access to Other Organizations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#743-reason-3-secrets-are-repository-specific"&gt;7.4.3. Reason 3: Secrets Are Repository-Specific&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#75-practical-example-why-it-fails"&gt;7.5. Practical Example: Why It Fails&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#76-how-someone-else-could-create-their-own-version"&gt;7.6. How Someone Else Could Create Their Own Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#77-summary-why-this-workflow-is-fchastanet-only"&gt;7.7. Summary: Why This Workflow is Fchastanet-Only&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#78-conclusion"&gt;7.8. Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8-workflow-outputs"&gt;8. Workflow Outputs&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#81-console-output"&gt;8.1. Console Output&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#82-github-actions-summary"&gt;8.2. GitHub Actions Summary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#9-troubleshooting"&gt;9. Troubleshooting&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#91-build-not-triggered"&gt;9.1. Build Not Triggered&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#92-authentication-failures"&gt;9.2. Authentication Failures&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#93-workflow-not-found"&gt;9.3. Workflow Not Found&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#94-debug-mode"&gt;9.4. Debug Mode&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10-migration-guide"&gt;10. Migration Guide&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#101-from-old-trigger-workflow"&gt;10.1. From Old Trigger Workflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#11-best-practices"&gt;11. Best Practices&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#111-trigger-paths"&gt;11.1. Trigger Paths&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#112-concurrency-control"&gt;11.2. Concurrency Control&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#113-conditional-triggers"&gt;11.3. Conditional Triggers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#12-faq"&gt;12. FAQ&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#121-q-do-i-need-to-configure-secrets-in-my-dependent-repository"&gt;12.1. Q: Do I need to configure secrets in my dependent repository?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#122-q-can-i-test-the-workflow-before-merging-to-master"&gt;12.2. Q: Can I test the workflow before merging to master?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#123-q-how-long-does-documentation-deployment-take"&gt;12.3. Q: How long does documentation deployment take?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#124-q-can-i-use-this-with-my-own-organization"&gt;12.4. Q: Can I use this with my own organization?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#125-q-what-if-the-build-fails"&gt;12.5. Q: What if the build fails?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#126-q-can-i-trigger-builds-for-multiple-repositories"&gt;12.6. Q: Can I trigger builds for multiple repositories?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#13-related-documentation"&gt;13. Related Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#14-support"&gt;14. Support&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--TOC--&gt;
&lt;h1 id="trigger-my-documents-reusable-workflow"&gt;Trigger My-Documents Reusable Workflow&lt;/h1&gt;
&lt;h2 id="1-overview"&gt;1. Overview&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;trigger-docs-reusable.yml&lt;/code&gt; workflow is a reusable GitHub Actions workflow that enables dependent repositories
(bash-compiler, bash-tools, bash-tools-framework, bash-dev-env) to trigger documentation builds in the centralized
my-documents orchestrator.&lt;/p&gt;</description></item><item><title>Static Site Generation Migration Analysis</title><link>https://fchastanet.github.io/my-documents/docs/brainstorming/static-site-generation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://fchastanet.github.io/my-documents/docs/brainstorming/static-site-generation/</guid><description>&lt;h1 id="static-site-generator-migration-analysis"&gt;Static Site Generator Migration Analysis&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Date:&lt;/strong&gt; 2026-02-17
&lt;strong&gt;Project:&lt;/strong&gt; my-documents repository migration and multi-site consolidation
&lt;strong&gt;Goal:&lt;/strong&gt; Migrate from Docsify to an SEO-optimized static site generator while maintaining simplicity
and GitHub CI compatibility&lt;/p&gt;
&lt;h2 id="1-executive-summary"&gt;1. Executive Summary&lt;/h2&gt;
&lt;p&gt;This document evaluates the current Docsify setup and recommends alternative static site generators
that provide superior SEO performance while maintaining the simplicity and ease of deployment that
made Docsify attractive.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Current Challenge:&lt;/strong&gt; Docsify renders content client-side, which severely limits SEO capabilities
and page load performance. This is critical for a documentation site seeking organic search visibility.&lt;/p&gt;</description></item></channel></rss>